<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.collaboportal.shoho.repository.ProjectNameMapper">
    <select id="getProjectName" resultType="com.collaboportal.shoho.entity.ProjectName" 
            parameterType="com.collaboportal.shoho.model.ProjectNameRequestParameter">
        SELECT DISTINCT
            mk.I_KIKAKU_ID as kkk_cod,
            mk.I_KIKAKU_MEI as kkk_nm
        FROM
            shohomoto_info.MS_KIKAKU mk
        <if test="headquartersFlag != null and headquartersFlag == 0">
            INNER JOIN shohomoto_info.MS_MR_TANTOU mmt
            ON mk.I_KIKAKU_ID = mmt.I_KIKAKU_ID
            <where>
                mmt.I_MR_M = #{email}
                <if test="dcf_cod != null">
                    AND mmt.I_SCD = #{dcf_cod}
                </if>
            </where>
        </if>
        ORDER BY
            mk.I_KIKAKU_ID ASC
    </select>
</mapper>