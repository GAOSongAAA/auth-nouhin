import{p as ee,l as te,aj as ae,z as F,r as p,aA as ne,bD as le,o as oe,A as h,aF as ue,u as ie,bd as re,f as s,a3 as M,Q as A,ab as D,aR as se,cc as de,q as ce,aH as S,bC as fe,av as ve,bE as me,d as xe,v as E,y as ge,a as pe,i as he}from"./index-8667328b.js";import{o as we,p as ye,I as Ve,u as be,q as G,r as Ce,s as Fe,t as Ie,n as ke}from"./Header-3fbbd51b.js";const Pe=ee({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...we(),...ye()},"VTextarea"),Be=te()({name:"VTextarea",directives:{Intersect:Ve},inheritAttrs:!1,props:Pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,I){let{attrs:g,emit:f,slots:n}=I;const o=ae(e,"modelValue"),{isFocused:a,focus:u,blur:v}=be(e),U=F(()=>typeof e.counterValue=="function"?e.counterValue(o.value):(o.value||"").toString().length),L=F(()=>{if(g.maxlength)return g.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function O(t,i){var l,r;!e.autofocus||!t||(r=(l=i[0].target)==null?void 0:l.focus)==null||r.call(l)}const T=p(),w=p(),H=ne(""),y=p(),j=F(()=>e.persistentPlaceholder||a.value||e.active);function k(){var t;y.value!==document.activeElement&&((t=y.value)==null||t.focus()),a.value||u()}function q(t){k(),f("click:control",t)}function Q(t){f("mousedown:control",t)}function J(t){t.stopPropagation(),k(),S(()=>{o.value="",fe(e["onClick:clear"],t)})}function K(t){var l;const i=t.target;if(o.value=i.value,(l=e.modelModifiers)!=null&&l.trim){const r=[i.selectionStart,i.selectionEnd];S(()=>{i.selectionStart=r[0],i.selectionEnd=r[1]})}}const m=p(),V=p(+e.rows),P=F(()=>["plain","underlined"].includes(e.variant));le(()=>{e.autoGrow||(V.value=+e.rows)});function x(){!e.autoGrow||S(()=>{if(!m.value||!w.value)return;const t=getComputedStyle(m.value),i=getComputedStyle(w.value.$el),l=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),r=m.value.scrollHeight,b=parseFloat(t.lineHeight),B=Math.max(parseFloat(e.rows)*b+l,parseFloat(i.getPropertyValue("--v-input-control-height"))),R=parseFloat(e.maxRows)*b+l||1/0,c=me(r!=null?r:0,B,R);V.value=Math.floor((c-l)/b),H.value=ve(c)})}oe(x),h(o,x),h(()=>e.rows,x),h(()=>e.maxRows,x),h(()=>e.density,x);let d;return h(m,t=>{t?(d=new ResizeObserver(x),d.observe(m.value)):d==null||d.disconnect()}),ue(()=>{d==null||d.disconnect()}),ie(()=>{const t=!!(n.counter||e.counter||e.counterValue),i=!!(t||n.details),[l,r]=re(g),{modelValue:b,...B}=G.filterProps(e),R=Ce(e);return s(G,M({ref:T,modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":P.value},e.class],style:e.style},l,B,{centerAffix:V.value===1&&!P.value,focused:a.value}),{...n,default:c=>{let{id:C,isDisabled:_,isDirty:z,isReadonly:W,isValid:X}=c;return s(Fe,M({ref:w,style:{"--v-textarea-control-height":H.value},onClick:q,onMousedown:Q,"onClick:clear":J,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},R,{id:C.value,active:j.value||z.value,centerAffix:V.value===1&&!P.value,dirty:z.value||e.dirty,disabled:_.value,focused:a.value,error:X.value===!1}),{...n,default:Y=>{let{props:{class:N,...$}}=Y;return s(A,null,[e.prefix&&s("span",{class:"v-text-field__prefix"},[e.prefix]),D(s("textarea",M({ref:y,class:N,value:o.value,onInput:K,autofocus:e.autofocus,readonly:W.value,disabled:_.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:k,onBlur:v},$,r),null),[[se("intersect"),{handler:O},null,{once:!0}]]),e.autoGrow&&D(s("textarea",{class:[N,"v-textarea__sizer"],id:`${$.id}-sizer`,"onUpdate:modelValue":Z=>o.value=Z,ref:m,readonly:!0,"aria-hidden":"true"},null),[[de,o.value]]),e.suffix&&s("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:i?c=>{var C;return s(A,null,[(C=n.details)==null?void 0:C.call(n,c),t&&s(A,null,[s("span",null,null),s(Ie,{active:e.persistentCounter||a.value,value:U.value,max:L.value,disabled:e.disabled},n.counter)])])}:void 0})}),ce({},T,w,y)}}),Re=xe({__name:"CTextArea",props:E({label:{default:""},placeholder:{default:""},maxlength:{default:"100"},disabled:{type:Boolean,default:!1},prependInnerIcon:{default:""},deleteLineBreakFlag:{type:Boolean,default:!0}},{input:{},inputModifiers:{}}),emits:E(["focus","change","blur","updateModel"],["update:input"]),setup(e,{emit:I}){const g=e,f=I,n=ge(e,"input"),o=()=>{var a;g.deleteLineBreakFlag&&(n.value=(a=n.value)==null?void 0:a.replace(/\r?\n/g,""))};return(a,u)=>(pe(),he(Be,{"hide-details":"auto",variant:"outlined",density:"compact",modelValue:n.value,"onUpdate:modelValue":[u[0]||(u[0]=v=>n.value=v),u[4]||(u[4]=v=>f("updateModel"))],label:a.label,placeholder:a.placeholder,maxlength:a.maxlength,disabled:a.disabled,"prepend-inner-icon":a.prependInnerIcon,onFocus:u[1]||(u[1]=v=>f("focus")),onChange:u[2]||(u[2]=v=>f("change")),onBlur:u[3]||(u[3]=v=>f("blur")),onInput:o,rows:"1","auto-grow":""},null,8,["modelValue","label","placeholder","maxlength","disabled","prepend-inner-icon"]))}});const Se=ke(Re,[["__scopeId","data-v-ad5147ef"]]);export{Se as C};
